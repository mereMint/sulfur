{% extends "layout.html" %}
{% block title %}AI Usage{% endblock %}

{% block content %}
<h3>AI API Usage</h3>
<p class="text-muted">Daily call counts for the Gemini API.</p>

{% if usage_data and not usage_data[0].error %}
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Model Name</th>
                    <th scope="col">Call Count</th>
                    <th scope="col">Input Tokens</th>
                    <th scope="col">Output Tokens</th>
                </tr>
            </thead>
            <tbody>
                {% for row in usage_data %}
                    <tr>
                        <td>{{ row.usage_date.strftime('%Y-%m-%d') }}</td>
                        <td>{{ row.model_name }}</td>
                        <td>{{ row.call_count }}</td>
                        <td>{{ row.input_tokens }}</td>
                        <td>{{ row.output_tokens }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="alert alert-danger">Could not load AI usage data.</div>
{% endif %}
{% endblock %}